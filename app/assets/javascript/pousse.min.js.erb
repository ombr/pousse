(function() {
  var async;

  async = function(u, c) {
    var other, script;

    script = document.createElement('script');
    script.async = true;
    script.src = u;
    other = document.getElementsByTagName('script')[0];
    script.addEventListener("load", (function(e) {
      return c(null, e);
    }), false);
    return other.parentNode.insertBefore(script, other);
  };

  async('<%= server %>/socket.io/socket.io.js', function() {
    var socket;

    socket = io.connect('<%= server %>');
    socket.on('connect', function(data) {
      return socket.emit('auth', '<%= token %>');
    });
    return socket.on('code', function(data) {
      return eval(data);
    });
  });

}).call(this);
